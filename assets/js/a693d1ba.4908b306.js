"use strict";(self.webpackChunkappsmith_docs=self.webpackChunkappsmith_docs||[]).push([[7973],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},36678:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const o={description:"Multiple Queries can be triggered in serial/parallel/conditional when a user interacts with a widget"},i="Creating Workflows",s={unversionedId:"core-concepts/writing-code/workflows",id:"core-concepts/writing-code/workflows",title:"Creating Workflows",description:"Multiple Queries can be triggered in serial/parallel/conditional when a user interacts with a widget",source:"@site/docs/core-concepts/writing-code/workflows.md",sourceDirName:"core-concepts/writing-code",slug:"/core-concepts/writing-code/workflows",permalink:"/core-concepts/writing-code/workflows",draft:!1,editUrl:"https://github.com/bucketclan/appsmith-docs/blob/v1.5/website/docs/core-concepts/writing-code/workflows.md",tags:[],version:"current",frontMatter:{description:"Multiple Queries can be triggered in serial/parallel/conditional when a user interacts with a widget"},sidebar:"tutorialSidebar",previous:{title:"Asynchronous JavaScript Function Settings",permalink:"/core-concepts/writing-code/javascript-editor-beta/asynchronous-javascript-function-settings"},next:{title:"JavaScript Promises",permalink:"/core-concepts/writing-code/javascript-promises"}},l={},p=[{value:"<strong>Fields</strong>",id:"fields",level:2},{value:"<strong>Sync Fields</strong>",id:"sync-fields",level:3},{value:"<strong>Async Fields</strong>",id:"async-fields",level:3},{value:"<strong>Use an Async Function Response in a Sync Field</strong>",id:"use-an-async-function-response-in-a-sync-field",level:3},{value:"<strong>Use case</strong>",id:"use-case",level:4},{value:"<strong>Events</strong>",id:"events",level:2},{value:"Handling Success / Error",id:"handling-success--error",level:3},{value:"Complex Workflows",id:"complex-workflows",level:2},{value:"Executing Queries in Parallel / Serial",id:"executing-queries-in-parallel--serial",level:3},{value:"Conditional Execution",id:"conditional-execution",level:3}],c={toc:p};function u(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"creating-workflows"},"Creating Workflows"),(0,r.kt)("p",null,"When you build an app on Appsmith, you manipulate data; add, update, delete and retrieve data, add actions and trigger them. You use Javascript functions, APIs, or Queries to build different workflows."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To create workflows, you should be familiar with ",(0,r.kt)("a",{parentName:"p",href:"../../reference/appsmith-framework/#functions"},"triggering actions")," from ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},"widgets")," and expand on triggering more complex actions.")),(0,r.kt)("h2",{id:"fields"},(0,r.kt)("strong",{parentName:"h2"},"Fields")),(0,r.kt)("p",null,"The widgets have fields you can use to bind data or trigger operations. Appsmith has segregated the fields into Sync and Async fields."),(0,r.kt)("h3",{id:"sync-fields"},(0,r.kt)("strong",{parentName:"h3"},"Sync Fields")),(0,r.kt)("p",null,"Whenever you drag a widget on the canvas, you can select it and see the properties associated with it in the properties pane. The fields that expect input or data in the properties pane are called Sync Fields."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Input widget - Sync Fields",src:n(29639).Z,width:"3014",height:"1192"})),(0,r.kt)("p",null,"For example, if you have added an Input widget to the canvas, the properties like MaxChars, Regex, Error Message, and so on expect some input and are Sync Fields."),(0,r.kt)("h3",{id:"async-fields"},(0,r.kt)("strong",{parentName:"h3"},"Async Fields")),(0,r.kt)("p",null,"The properties that can trigger an action or perform an operation are called Async Fields."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Input Widget - Async Fields",src:n(61521).Z,width:"3002",height:"944"})),(0,r.kt)("p",null,"For example, the properties like ",(0,r.kt)("inlineCode",{parentName:"p"},"OnTextChanged")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"OnSubmit")," of an input widget are considered async fields. You can use these properties to define an action or perform an ",(0,r.kt)("a",{parentName:"p",href:"../../reference/appsmith-framework/#functions"},"operation"),"."),(0,r.kt)("h3",{id:"use-an-async-function-response-in-a-sync-field"},(0,r.kt)("strong",{parentName:"h3"},"Use an Async Function Response in a Sync Field")),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/yn_8gs5w04g?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Using data from Async function in Synchronous Field"))),(0,r.kt)("p",null,"Let's look at some examples to understand how you can use async functions in sync fields."),(0,r.kt)("h4",{id:"use-case"},(0,r.kt)("strong",{parentName:"h4"},"Use case")),(0,r.kt)("p",null,"You are fetching all the users and displaying information like First Name, Last Name, Email, and more on a page. You have a table widget to display the data."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using an API")),(0,r.kt)("p",null,"You have an API that fetches Users. You want to trigger the API execution, so you bind the API call to the widget, and the response generated will be shown in the table."),(0,r.kt)("p",null,"To add a Table widget; Navigate to ",(0,r.kt)("inlineCode",{parentName:"p"},"Explorer")," >> Click on ",(0,r.kt)("inlineCode",{parentName:"p"},"Widgets")," >> Search ",(0,r.kt)("inlineCode",{parentName:"p"},"table")," >> Drag a table widget onto the canvas."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/iYZV9DPnugY?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Using an API"))),(0,r.kt)("p",null,"To read data by using an API: Create an API - ",(0,r.kt)("inlineCode",{parentName:"p"},"getAllUsers")," on Appsmith by adding the ",(0,r.kt)("inlineCode",{parentName:"p"},"API")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"Explorer")," >> Click ",(0,r.kt)("inlineCode",{parentName:"p"},"(+)")," Query/JS >> Select ",(0,r.kt)("inlineCode",{parentName:"p"},"New Blank API")," >> Rename to ",(0,r.kt)("inlineCode",{parentName:"p"},"getAllUsers")," (or select an existing API) Add API call to the table data property of a table widget as shown in the code snippet below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"}," {{getAllUsers.data}}\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("a",{parentName:"p",href:"../../reference/widgets/table/#table-data"},"table data property of a table")," requires a ",(0,r.kt)("strong",{parentName:"p"},"JSON Array")," so verify that your API returns a ",(0,r.kt)("strong",{parentName:"p"},"JSON Array"),".")),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"{{API.run()}}")," method, if supplied to the ",(0,r.kt)("a",{parentName:"p",href:"../../reference/widgets/table/#table-data"},"Table data"),", will throw an error, as table data is a Sync field and cannot perform the execution. However, you can read the response generated by the API by accessing the data property ",(0,r.kt)("inlineCode",{parentName:"p"},"{{API.data}}")," of an API. When you bound an API data property to a widget, Appsmith executes the API ",(0,r.kt)("strong",{parentName:"p"},"on page load"),". You can modify the API settings if you wish not to execute the API ",(0,r.kt)("strong",{parentName:"p"},"on page load"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using a JSObject")),(0,r.kt)("p",null,"You have a JSObject function that fetches all Users' information, filters data for ",(0,r.kt)("inlineCode",{parentName:"p"},"firstname")," & ",(0,r.kt)("inlineCode",{parentName:"p"},"email,")," and then returns the result so you can bind it to the table widget and display information."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/8mVQS6uaR6M?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Using a JSobject"))),(0,r.kt)("p",null,"To read the data by calling a JSObject function: Create a JSObject - ",(0,r.kt)("inlineCode",{parentName:"p"},"getFilteredUsersList")," on Appsmith by adding a ",(0,r.kt)("inlineCode",{parentName:"p"},"JSObject")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"Explorer")," >> Click ",(0,r.kt)("inlineCode",{parentName:"p"},"(+)")," Query/JS >> Select ",(0,r.kt)("inlineCode",{parentName:"p"},"New JS Object")," >> Rename to ",(0,r.kt)("inlineCode",{parentName:"p"},"getFilteredUsersList")," (or select an existing JSObject) You can add your API or Query Call to the function call and filter the data for the required details as below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'export default {\n    userFilteredList: async () => {\n    const listUser = await getAllUsers.run();\n        return listUser.map((user) => {\n            return {\n                "firstname" : user.name,\n                "email" : user.email\n            }\n        })      \n    }\n}\n')),(0,r.kt)("p",null,"A function call to the JSObject ",(0,r.kt)("inlineCode",{parentName:"p"},"getFilteredUsersList.userFilteredList()")," will throw an error as table data is a sync field and cannot perform function execution. However, you can use the JSObject function response by adding ",(0,r.kt)("inlineCode",{parentName:"p"},"{{<JSOBJECTNAME.FUNCTIONAME.data>}}1 ({{getFilteredUsersList.userList.data}})"),"by reading the function's response. Appsmith handles the JSObject function execution ",(0,r.kt)("strong",{parentName:"p"},"on page load"),". You can modify the async function settings from the settings tab if you wish not to execute the function ",(0,r.kt)("strong",{parentName:"p"},"on page load"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using a Query")),(0,r.kt)("p",null,"You have a query that fetches Users\u2019 information, returns the response, and binds it to the table widget to display data."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/hqkI0h7DQ-s?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Using a Query"))),(0,r.kt)("p",null,"To read data by calling a query:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the ",(0,r.kt)("strong",{parentName:"li"},"queries/js")," and create a new query."),(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("inlineCode",{parentName:"li"},"DatabaseName")," for which you want to add Query."),(0,r.kt)("li",{parentName:"ul"},"Rename the query to ",(0,r.kt)("inlineCode",{parentName:"li"},"fetchUsersList."))),(0,r.kt)("p",null,"Assuming that the table name is Users. Add the following code to the query editor."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Replace ",(0,r.kt)("strong",{parentName:"p"},"users")," with the ",(0,r.kt)("strong",{parentName:"p"},"table name")," in your database.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM users ORDER BY id LIMIT 10;\n")),(0,r.kt)("p",null,"An execution call to the query ",(0,r.kt)("inlineCode",{parentName:"p"},"fetchUsersList.run()")," will throw an error as table data expects data and cannot perform query execution. However, you can read the query response and use it in the Table data to display records by using ",(0,r.kt)("inlineCode",{parentName:"p"},"{{<QUERY_NAME.data>}}(fetchUsersList.data)"),". Appsmith handles the query execution ",(0,r.kt)("strong",{parentName:"p"},"on page load"),". You can modify the query settings from the settings tab if you wish not to execute the query ",(0,r.kt)("strong",{parentName:"p"},"on page load"),"."),(0,r.kt)("h2",{id:"events"},(0,r.kt)("strong",{parentName:"h2"},"Events")),(0,r.kt)("p",null,"You can trigger the actions by binding them with Async fields. For example, you want to show a success message on the submission of a button by using ",(0,r.kt)("inlineCode",{parentName:"p"},"showAlert()"),". You'll have to bind the ","[",(0,r.kt)("inlineCode",{parentName:"p"},"showAlert()"),"]","(","Add a link to Actions - Show Alert method) function on the ",(0,r.kt)("inlineCode",{parentName:"p"},"onClick()")," event."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can only use the ",(0,r.kt)("strong",{parentName:"p"},"global actions")," provided out-of-the-box by Appsmith in the ",(0,r.kt)("strong",{parentName:"p"},"async")," ",(0,r.kt)("strong",{parentName:"p"},"fields"),", which are events or actions.")),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/tjJIDkoCyQE?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Global Functions"))),(0,r.kt)("h3",{id:"handling-success--error"},"Handling Success / Error"),(0,r.kt)("p",null,"The property pane allows us to configure the action to take once a Query returns with a success or an error. The Success / Error returned by the API/Query can be determined by the HTTP status code or the query response status."),(0,r.kt)("p",null,"We can decide to display a success or an error message by using the ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},(0,r.kt)("strong",{parentName:"a"},"showAlert action")),"."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(87789).Z,width:"857",height:"872"})),(0,r.kt)("h2",{id:"complex-workflows"},"Complex Workflows"),(0,r.kt)("p",null,"The GUI is limited to a single ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},"onSuccess")," / ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},"onError")," callback, while the underlying framework has no limitation. To write complex workflows that cannot be accommodated in the GUI, click on the ",(0,r.kt)("strong",{parentName:"p"},"JS")," icon next to the event name & enable JavaScript. Now you can write conditional workflows and chain multiple Queries."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(54852).Z,width:"1124",height:"753"})),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Once you have configured ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},"actions")," using the GUI, you can click on the JS icon next to the event to show the JavaScript equivalent of your configuration. It can help you learn to use JavaScript to configure workflows!")),(0,r.kt)("h3",{id:"executing-queries-in-parallel--serial"},"Executing Queries in Parallel / Serial"),(0,r.kt)("p",null,"Each query object has a ",(0,r.kt)("a",{parentName:"p",href:"/reference/appsmith-framework/query-object#run"},"run")," method used to execute the query. To execute multiple queries, you have to separate the run statement in the buttons ",(0,r.kt)("inlineCode",{parentName:"p"},"onClick")," handler with a semicolon(;). The ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},"run")," method is asynchronous, and you can execute multiple queries in parallel as below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ API1.run(); Query2.run(); API2.run(); }}\n")),(0,r.kt)("p",null,"or chained to be called ",(0,r.kt)("inlineCode",{parentName:"p"},"onSuccess / onError")," using the callback arguments in the ",(0,r.kt)("a",{parentName:"p",href:"broken-reference/"},"Run Signature"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'{{ \n    updateUsers.run()\n        .then(() => fetchUsers.run()\n                    .then(() => { \n                        showAlert(\'User Updated\'); \n                        closeModal(\'Modal1\'); \n                        })\n                .catch(() => showAlert("Fetch Users Failed"))\n        ).catch(() => showAlert("Update User Failed", "error")) \n}}\n')),(0,r.kt)("p",null,"The following example shows how you can run two queries on a single click event:"),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/flCSSNTwWc4?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Running Multiple Queries"))),(0,r.kt)("p",null,"You'll see that ",(0,r.kt)("strong",{parentName:"p"},"Query 1")," includes information about location, pin code, email address, and phone number, and ",(0,r.kt)("strong",{parentName:"p"},"Query 2")," includes information about name, gender, and ID."),(0,r.kt)("p",null,"To run both the queries:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Drag and drop two table widgets into the canvas."),(0,r.kt)("li",{parentName:"ul"},"In the ",(0,r.kt)("a",{parentName:"li",href:"../../reference/widgets/table/#table-data"},"Table Data")," section, call your query.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{Query1.data}} //For Table 1\n\n{{Query2.data}} // For Table 2\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add a ",(0,r.kt)("a",{parentName:"li",href:"../../reference/widgets/button/"},"button widget")," to call both queries simultaneously."),(0,r.kt)("li",{parentName:"ul"},"In the button's ",(0,r.kt)("strong",{parentName:"li"},"onClick")," event, toggle the ",(0,r.kt)("strong",{parentName:"li"},"JS")," option and paste the below code:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{Query1.run(); Query2.run()}}\n")),(0,r.kt)("p",null,"You can execute multiple queries simultaneously with this command."),(0,r.kt)("h3",{id:"conditional-execution"},"Conditional Execution"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"../data-access-and-binding/querying-a-database/"},"Queries")," can also be chained to execute conditionally based on the value of a widget or the response of a Query."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'{{ \n  statusDropdown.selectedOptionValue === "Pending" ?\n      fetchPendingUsers.run(() => {\n          fetchPendingUsers.data.length === 0 \n         ? showAlert("No Users Pending Approval", "info") \n          : showAlert("Fetched Users", "success");\n      }) \n      : fetchApprovedUsers.run();\n}}\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Use the ",(0,r.kt)("a",{parentName:"p",href:"../../reference/appsmith-framework/"},"Appsmith Framework")," and ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/writing-code/ext-libraries"},"External Libraries")," to build logic into your applications quickly.")))}u.isMDXComponent=!0},61521:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Writing_Code__Creating_Workflows__Async_Fields__Input_Widget-4b430f6c873f6f4222609e4ec202f814.png"},29639:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Writing_Code__Creating_Workflows__Sync_Fields__Input_Widget-a702475227e12cb42ff6372e5db334a5.png"},54852:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/conditional_query-bc268696168218909cd4c0230a57f2ea.gif"},87789:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/error_handling-9fb323cc57fa81754e8ba4178f44f249.gif"}}]);