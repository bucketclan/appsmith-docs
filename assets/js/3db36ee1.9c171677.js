"use strict";(self.webpackChunkappsmith_docs=self.webpackChunkappsmith_docs||[]).push([[6130],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,h=m["".concat(l,".").concat(c)]||m[c]||d[c]||o;return a?n.createElement(h,s(s({ref:t},u),{},{components:a})):n.createElement(h,s({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},16548:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const o={sidebar_position:5},s="Store Value",i={unversionedId:"reference/appsmith-framework/widget-actions/store-value",id:"reference/appsmith-framework/widget-actions/store-value",title:"Store Value",description:"This function stores key-value data to access later anywhere in the app.",source:"@site/docs/reference/appsmith-framework/widget-actions/store-value.md",sourceDirName:"reference/appsmith-framework/widget-actions",slug:"/reference/appsmith-framework/widget-actions/store-value",permalink:"/reference/appsmith-framework/widget-actions/store-value",draft:!1,editUrl:"https://github.com/bucketclan/appsmith-docs/blob/v1.5/website/docs/reference/appsmith-framework/widget-actions/store-value.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Close Modal",permalink:"/reference/appsmith-framework/widget-actions/close-modal"},next:{title:"Download",permalink:"/reference/appsmith-framework/widget-actions/download"}},l={},p=[{value:"Signature",id:"signature",level:2},{value:"Arguments",id:"arguments",level:3},{value:"Accessing Store Value",id:"accessing-store-value",level:2},{value:"Reading Store Value with Async and Await",id:"reading-store-value-with-async-and-await",level:3},{value:"Scopes",id:"scopes",level:2},{value:"Persistent Store",id:"persistent-store",level:4},{value:"Session Store",id:"session-store",level:4},{value:"Clear store value",id:"clear-store-value",level:2},{value:"What&#39;s Next",id:"whats-next",level:3}],u={toc:p};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"store-value"},"Store Value"),(0,r.kt)("p",null,"This function stores key-value data to access later anywhere in the app."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Appsmith  ",(0,r.kt)("inlineCode",{parentName:"p"},"storeValue"),"  works similar to the browser's localStorage method ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem"},"setItem"),".")),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/UUvJn8oWqNs",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"How to use the StoreValue Function"))),(0,r.kt)("h2",{id:"signature"},"Signature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"storeValue(key: string, value: any, persist? = true): Promise\n")),(0,r.kt)("h3",{id:"arguments"},"Arguments"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Argument Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"key")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the key")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"value")),(0,r.kt)("td",{parentName:"tr",align:null},"Add/Update the value of the given key")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"persist")),(0,r.kt)("td",{parentName:"tr",align:null},"Defaults to ",(0,r.kt)("strong",{parentName:"td"},"true"),". ",(0,r.kt)("strong",{parentName:"td"},"True")," persists the key-value pair in the browser's local storage, and you can use it between sessions. A ",(0,r.kt)("strong",{parentName:"td"},"false")," does not persist the value and removes the key once the page refreshes or is closed.")))),(0,r.kt)("h2",{id:"accessing-store-value"},"Accessing Store Value"),(0,r.kt)("p",null,"You can access the values from the store by referencing the key inside the store object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ appsmith.store.key }}\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Store value is ",(0,r.kt)("strong",{parentName:"p"},"asynchronous"),". Thus, the execution of the function ",(0,r.kt)("strong",{parentName:"p"},"doesn't")," happen ",(0,r.kt)("strong",{parentName:"p"},"simultaneously"),", so when you try to ",(0,r.kt)("strong",{parentName:"p"},"read")," the key from the ",(0,r.kt)("strong",{parentName:"p"},"store")," in the ",(0,r.kt)("strong",{parentName:"p"},"following line,")," it might ",(0,r.kt)("strong",{parentName:"p"},"not")," always give the ",(0,r.kt)("strong",{parentName:"p"},"expected")," result.")),(0,r.kt)("h3",{id:"reading-store-value-with-async-and-await"},"Reading Store Value with Async and Await"),(0,r.kt)("p",null,"Store value is an asynchronous action, and you get some unexpected results when you try to read the key (you added) in the ",(0,r.kt)("strong",{parentName:"p"},"following")," line. You sometimes want to ",(0,r.kt)("strong",{parentName:"p"},"read")," the store value right after you set it. To achieve this, you can use  ",(0,r.kt)("inlineCode",{parentName:"p"},"async"),"  and  ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," ."),(0,r.kt)("p",null,"Let\u2019s take an example where you have an API that returns a unique identifier. You wish to store its value in the appsmith store instead of calling the API repeatedly. You have a JSObject that calls the API, stores the value in store, reads the stored value, and performs operations. But when you try to read the stored value, you get the key\u2019s value as  ",(0,r.kt)("inlineCode",{parentName:"p"},"undefined"),"  because the key doesn\u2019t exist in the store, and your code logic fails."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'export default {\n    getUniqueValue: async () => {\n        GetUniqueNameAPI.run(\n            () => {\n                storeValue("uniqueEmail", GetUniqueNameAPI.data.uniqueName);\n            }\n        )\n        showAlert("Success! Store value set: " + appsmith.store.uniqueEmail);\n    }\n}\n')),(0,r.kt)("p",null,"The  ",(0,r.kt)("inlineCode",{parentName:"p"},"getUniqueValue"),"  function calls an API  ",(0,r.kt)("inlineCode",{parentName:"p"},"GetUniqueNameAPI.run()")," ",(0,r.kt)("inlineCode",{parentName:"p"},"``` and stores the value in the appsmith store with a key "),"uniqueEmail",(0,r.kt)("inlineCode",{parentName:"p"},". When you try to retrieve the value for "),"uniqueEmail",(0,r.kt)("inlineCode",{parentName:"p"}," in the next line, the function shows an alert "),"Success! Store value set:",(0,r.kt)("inlineCode",{parentName:"p"}," ")," ```",(0,r.kt)("inlineCode",{parentName:"p"}," ")," ",(0,r.kt)("inlineCode",{parentName:"p"},"undefined")," ."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"A store returns undefined when the storeValue function execution is not completed.",src:a(95385).Z,width:"2524",height:"994"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Why was the key not available in store when you added it?")),(0,r.kt)("p",null,"The key is not added to the store and gives  ",(0,r.kt)("inlineCode",{parentName:"p"},"undefined"),"  value as the API call is in progress."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"How to handle such a scenario?")),(0,r.kt)("p",null,"You can use async and await to ensure your key has a valid value stored in the appsmith store for such scenarios. When using the  ",(0,r.kt)("inlineCode",{parentName:"p"},"async"),"  and  ",(0,r.kt)("inlineCode",{parentName:"p"},"await"),"  keywords, execution waits for the API call to complete before moving ahead to the next line."),(0,r.kt)("p",null,"Let\u2019s modify the code snippet so that the store adds a valid value."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'export default {\n     getUniqueValue: async () => {\n         await GetUniqueNameAPI.run(\n              () => {\n                 storeValue("uniqueEmail", GetUniqueNameAPI.data.uniqueName);\n                 }\n        )\n        showAlert("Success! Store value set: " + appsmith.store.uniqueEmail);\n    }\n}\n')),(0,r.kt)("p",null,"The  ",(0,r.kt)("inlineCode",{parentName:"p"},"getUniqueValue"),"  function calls  ",(0,r.kt)("inlineCode",{parentName:"p"},"GetUniqueNameAPI.run()")," . The  ",(0,r.kt)("inlineCode",{parentName:"p"},"async"),"  block embedded in the run method adds the API response value in the appsmith store. The prefix  ",(0,r.kt)("inlineCode",{parentName:"p"},"await"),"  to the  ",(0,r.kt)("inlineCode",{parentName:"p"},"GetUniqueNameAPI"),"  call ensures that the control waits for API execution to complete and add the value to the store for the given key. You can read the value from the store for the given key once the execution moves to the next line."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"The await keyword ensures that the storeValue function execution is completed and returns a valid value for the given key",src:a(79048).Z,width:"2518",height:"1050"})),(0,r.kt)("h2",{id:"scopes"},"Scopes"),(0,r.kt)("p",null,"In Appsmith, two types of scopes are available for the storeValue function. The first is a persistent (persistent store), and the second is a session (session store)."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The  ",(0,r.kt)("inlineCode",{parentName:"p"},"storeValue"),"  in Appsmith works similar to the browser's localStorage method ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem"},"setItem."))),(0,r.kt)("h4",{id:"persistent-store"},"Persistent Store"),(0,r.kt)("p",null,"If you store a value in the persistent store, it will remain in the store across different sessions/pages. For example, if you store a value in a persistent store, the value will be saved even if the page is reloaded."),(0,r.kt)("p",null,"You can set a persistent value by simply calling the store value with two parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Key - Name of the Key"),(0,r.kt)("li",{parentName:"ul"},"Value - The value for the given key")),(0,r.kt)("p",null,"Let's see how it works:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Drag and drop the ",(0,r.kt)("em",{parentName:"li"},(0,r.kt)("strong",{parentName:"em"},"input widget"))," to the canvas."),(0,r.kt)("li",{parentName:"ul"},"Select the input widget and go to the widget properties."),(0,r.kt)("li",{parentName:"ul"},"Scroll down to the Actions section, select the ",(0,r.kt)("inlineCode",{parentName:"li"},"onTextChanged")," action, and toggle the ",(0,r.kt)("inlineCode",{parentName:"li"},"JS")," label."),(0,r.kt)("li",{parentName:"ul"},"Copy and paste the code below, adjusting the value if needed.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"By default, persist is set as ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". Define ",(0,r.kt)("inlineCode",{parentName:"p"},"persist = false")," to use a ",(0,r.kt)("a",{parentName:"p",href:"/reference/appsmith-framework/widget-actions/store-value#session-store"},"session store"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"{{storeValue('one',Input1.text)}}\n")),(0,r.kt)("p",null,"Here, ",(0,r.kt)("inlineCode",{parentName:"p"},"one")," is the key, and ",(0,r.kt)("inlineCode",{parentName:"p"},"Input1.text")," is the value."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("strong",{parentName:"p"},"persisted")," state is ",(0,r.kt)("strong",{parentName:"p"},"cleared")," out when a user ",(0,r.kt)("strong",{parentName:"p"},"logs out"),".")),(0,r.kt)("h4",{id:"session-store"},"Session Store"),(0,r.kt)("p",null,"You can use the session store to store the value you wish to hold until the page reloads or a user closes the window."),(0,r.kt)("p",null,"Let's see how it works:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Drag and drop another ",(0,r.kt)("strong",{parentName:"li"},"input widget")," to the canvas."),(0,r.kt)("li",{parentName:"ul"},"Select the input widget and go to the widget properties."),(0,r.kt)("li",{parentName:"ul"},"Scroll down to the Actions section, select the ",(0,r.kt)("inlineCode",{parentName:"li"},"onTextChanged")," action, and toggle the ",(0,r.kt)("inlineCode",{parentName:"li"},"JS")," label."),(0,r.kt)("li",{parentName:"ul"},"Copy and paste the code below, adjusting the value if needed.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{storeValue('two',Input2.text, false)}}\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Session store (",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"persist=false")),") is only available till the user exits the app or refreshes a page.")),(0,r.kt)("p",null,"The GIF below demonstrates how both functions work."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Persistent vs Session Store",src:a(74949).Z,width:"600",height:"338"})),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If the ",(0,r.kt)("strong",{parentName:"p"},"same key")," is ",(0,r.kt)("strong",{parentName:"p"},"available")," in the ",(0,r.kt)("strong",{parentName:"p"},"session")," and ",(0,r.kt)("strong",{parentName:"p"},"persisted")," states, the ",(0,r.kt)("strong",{parentName:"p"},"session")," value gets a ",(0,r.kt)("strong",{parentName:"p"},"preference"),".")),(0,r.kt)("p",null,"You can see the storeValue in action or fork the app and learn more about ",(0,r.kt)("a",{parentName:"p",href:"https://app.appsmith.com/app/appsmith-store/page1-627b8afe0b47255c28137dca"},"persistent and session stores"),"."),(0,r.kt)("h2",{id:"clear-store-value"},"Clear store value"),(0,r.kt)("p",null,"To clear the value in the store, you can set its value to ",(0,r.kt)("strong",{parentName:"p"},"undefined"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'{{\n    storeValue("userID", undefined);\n}}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Clear Persistent store value")),(0,r.kt)("p",null,"If you want a clear persistent store value, you must define two parameters as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{\n    storeValue('one', undefined); \n}}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Clear Session store value")),(0,r.kt)("p",null,"If you want to clear the session store value, you must define three parameters as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"{{\n    storeValue('two', undefined, false);\n}}\n")),(0,r.kt)("h3",{id:"whats-next"},"What's Next"),(0,r.kt)("p",null,"Check out the app to ",(0,r.kt)("a",{parentName:"p",href:"https://app.appsmith.com/app/appsmith-store/page1-627b8afe0b47255c28137dca"},"learn more about persistent and session stores"),".",(0,r.kt)("a",{parentName:"p",href:"https://app.appsmith.com/app/appsmith-store/page1-627b8afe0b47255c28137dca"}," "),"You can fork this app to have a better understanding of it."))}d.isMDXComponent=!0},95385:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Appsmith_Framework__Widget_Actions__StoreValue__Undefined_Value-3f0cdaef55dd12222a93e721bb9a5f00.png"},79048:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Appsmith_Framework__Widget_Actions__StoreValue__Valid_Value-42f816afe4566ea1ced2159484593d49.png"},74949:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Store_value_2-f758d49415130d1df45a65a214656b35.gif"}}]);