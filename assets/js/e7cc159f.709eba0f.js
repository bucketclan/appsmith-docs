"use strict";(self.webpackChunkappsmith_docs=self.webpackChunkappsmith_docs||[]).push([[9922],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>p});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var r=n.createContext({}),c=function(e){var t=n.useContext(r),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(r.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,r=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(a),p=i,m=d["".concat(r,".").concat(p)]||d[p]||h[p]||o;return a?n.createElement(m,s(s({ref:t},u),{},{components:a})):n.createElement(m,s({ref:t},u))}));function p(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,s=new Array(o);s[0]=d;var l={};for(var r in t)hasOwnProperty.call(t,r)&&(l[r]=t[r]);l.originalType=e,l.mdxType="string"==typeof e?e:i,s[1]=l;for(var c=2;c<o;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},20520:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=a(87462),i=(a(67294),a(3905));const o={description:"Guide on how to use ElasticSearch as a data source on Appsmith",sidebar_position:15},s="How to Use Elasticsearch as a Datasource on Appsmith",l={unversionedId:"learning-and-resources/how-to-guides/how-to-use-elasticsearch-as-a-data-source-on-appsmith",id:"learning-and-resources/how-to-guides/how-to-use-elasticsearch-as-a-data-source-on-appsmith",title:"How to Use Elasticsearch as a Datasource on Appsmith",description:"Guide on how to use ElasticSearch as a data source on Appsmith",source:"@site/docs/learning-and-resources/how-to-guides/how-to-use-elasticsearch-as-a-data-source-on-appsmith.md",sourceDirName:"learning-and-resources/how-to-guides",slug:"/learning-and-resources/how-to-guides/how-to-use-elasticsearch-as-a-data-source-on-appsmith",permalink:"/appsmith-docs/learning-and-resources/how-to-guides/how-to-use-elasticsearch-as-a-data-source-on-appsmith",draft:!1,editUrl:"https://github.com/bucketclan/appsmith-docs/blob/v1.5/website/docs/learning-and-resources/how-to-guides/how-to-use-elasticsearch-as-a-data-source-on-appsmith.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{description:"Guide on how to use ElasticSearch as a data source on Appsmith",sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"How to Use Redshift as a Datasource on Appsmith",permalink:"/appsmith-docs/learning-and-resources/how-to-guides/use-redshift-as-data-source-on-appsmith"},next:{title:"How to Use Prepared Statements?",permalink:"/appsmith-docs/learning-and-resources/how-to-guides/how-to-use-prepared-statements"}},r={},c=[{value:"Elasticsearch",id:"elasticsearch",level:2},{value:"What to build",id:"what-to-build",level:2},{value:"Initial setup",id:"initial-setup",level:2},{value:"Querying the database",id:"querying-the-database",level:2},{value:"Displaying the data",id:"displaying-the-data",level:2},{value:"Let&#39;s try to make a button and update data on ElasticSearch using Appsmith",id:"lets-try-to-make-a-button-and-update-data-on-elasticsearch-using-appsmith",level:2}],u={toc:c};function h(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"how-to-use-elasticsearch-as-a-datasource-on-appsmith"},"How to Use Elasticsearch as a Datasource on Appsmith"),(0,i.kt)("p",null,"This guide assumes you have basic familiarity with ",(0,i.kt)("a",{parentName:"p",href:"https://www.appsmith.com"},"Appsmith"),". I suggest creating an account and trying it out If you don't. I assure you that it is straightforward to get acquainted with quickly."),(0,i.kt)("h2",{id:"elasticsearch"},"Elasticsearch"),(0,i.kt)("p",null,"Elasticsearch is a distributed, free and open search and analytics engine for all types of data, including textual, numerical, geospatial, structured, and unstructured. Known for its simple REST APIs, distributed nature, speed, and scalability, Elasticsearch is the central component of the Elastic Stack, a set of free and open tools for data ingestion, enrichment, storage, analysis, and visualization."),(0,i.kt)("p",null,"In this guide, you will learn how you can use Elasticseach as a data source for your Appsmith application."),(0,i.kt)("h2",{id:"what-to-build"},"What to build"),(0,i.kt)("p",null,"We will use accounts.json that has sample data of bank customers and their account balance. This guide will display all the defaulters (account balance less than 20000) with their account info. We will also make a button that will update the balance of the selected person."),(0,i.kt)("h2",{id:"initial-setup"},"Initial setup"),(0,i.kt)("p",null,"Let's quickly first see how you can integrate Elasticsearch in Appsmith. Just head to Appsmith, and let's say for the scope of this guide, you're building a new application which you want to get data from your Elasticsearch server."),(0,i.kt)("p",null,"Click on the ",(0,i.kt)("inlineCode",{parentName:"p"},"New")," button to create a new application. Then click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Generate from a Data table")," option. You should be prompted with a screen that would ask you to connect the database of your choice. It should look something like this:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-1",src:a(56518).Z,width:"1849",height:"814"})),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Connect new Datasource")," and find ",(0,i.kt)("inlineCode",{parentName:"p"},"ElasticSearch")," from all the available database options."),(0,i.kt)("p",null,"Now you will be greeted with a page to fill in the credentials of your ElasticSearch server. Please fill in the host/port login credentials. The unfilled screen for this would look something like this:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-2",src:a(94551).Z,width:"1594",height:"447"})),(0,i.kt)("p",null,"If you are hosting Elasticsearch on a local server, consider using ngrok to expose the public address. You can see how to use ngrok and other local APIs with appsmith here: ",(0,i.kt)("a",{parentName:"p",href:"https://docs.appsmith.com/how-to-guides/how-to-work-with-local-apis-on-appsmith"},"https://docs.appsmith.com/how-to-guides/how-to-work-with-local-apis-on-appsmith")),(0,i.kt)("p",null,"Once you fill in all the details, you can click Test from the options below to test your connection. It will let you know if Appsmith can successfully connect to your database or not."),(0,i.kt)("p",null,'If the test is successful, click on "Save" to save your connection on Appsmith.'),(0,i.kt)("h2",{id:"querying-the-database"},"Querying the database"),(0,i.kt)("p",null,"So, now that you're done with setting up a connection to your database server, you should be able to see a screen like this:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-3",src:a(23668).Z,width:"1592",height:"549"})),(0,i.kt)("p",null,"You can change the name of Datasource by clicking on it. I will use the How To datasource here. From here, let's try writing a query for our application. For our database, I have already added the accouts.json data file."),(0,i.kt)("p",null,"Querying in Appsmith is very simple; click on the New Query button from above and select which kind of query operation you're going to have. For our use case, we're just trying to get data from our database, so I would go ahead and use the default GET method."),(0,i.kt)("p",null,"Mention the path in the text field. For our case, we will write ",(0,i.kt)("inlineCode",{parentName:"p"},"/bank/_search/?size=50")," . This will take the first 50 lists which satisfy the query. You can include more data by increasing the value of size. The default value is 10"),(0,i.kt)("p",null,"In the body, we will write our query."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "query": {\n    "range": {\n      "balance": {\n        "lte": 20000\n      }\n    }\n  }\n}\n')),(0,i.kt)("p",null,"It will look something like this."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-4",src:a(46205).Z,width:"1341",height:"751"})),(0,i.kt)("p",null,"I will name this query Defaulter. Now for your convenience, Appsmith does all the input sanitization and helps you query your database without worrying about any malicious data. In our case, we're just reading from the database, so our query will also be straightforward."),(0,i.kt)("h2",{id:"displaying-the-data"},"Displaying the data"),(0,i.kt)("p",null,"Now that we have a query to fetch data from the database. It's time to display the data. Let's start with a simple way to go on to this."),(0,i.kt)("p",null,"Data is stored as a JSON format in Elasticsearch, and we will use a table to display it."),(0,i.kt)("p",null,"Click on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Widgets")," ribbon and select the ",(0,i.kt)("inlineCode",{parentName:"p"},"Table")," widget."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-5",src:a(75696).Z,width:"247",height:"948"})),(0,i.kt)("p",null,"Drag and drop it on the canvas. It should be like this."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-6",src:a(88242).Z,width:"984",height:"653"})),(0,i.kt)("p",null,"So let's try displaying our query data in the table. Now click on the settings icon, and all you have to do is replace the table data value with your query data. In this case, the identifier of my query is Query1, so I will just put ",(0,i.kt)("inlineCode",{parentName:"p"},"Defaulters.data.hits.hits")," inside ","{","{","}","}. Remember Defaulters is the name of the query."),(0,i.kt)("p",null,"We will hide unwanted columns like ","_","index, ","_","type ","_","score, and ","_","soruce."),(0,i.kt)("p",null,"After that, we will add our custom columns named ",(0,i.kt)("inlineCode",{parentName:"p"},"Firstname, Lastname, Balance, Email")),(0,i.kt)("p",null,"Now we have to fill the data with the required key names from the JSON. For the Firstname column, use this query to add all the values from the database."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{{currentRow._source["firstname"]}}\n')),(0,i.kt)("p",null,"You will see it will automatically fill the column with the data. Similarly, we will fill in the data for all the columns. i.e., change the value in ",(0,i.kt)("inlineCode",{parentName:"p"},"_source")," with the required key you want."),(0,i.kt)("p",null,"Finally, you can see your table looking like this."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-7",src:a(12445).Z,width:"849",height:"430"})),(0,i.kt)("p",null,"You can also use the filter command in the table widget. Let's say you want to find the people who have a balance less than 10000 and are in a critical red zone. You can click the filter tag and fill the fields with the objective in mind. For this instance, we can select Where -> Balance -> is less than or equal to -> 10000"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-8",src:a(61426).Z,width:"845",height:"609"})),(0,i.kt)("p",null,"It's very self-explanatory and easy to use. Also, remember to change the type of balance column to Number by going into column settings and selecting the type in Column type."),(0,i.kt)("h2",{id:"lets-try-to-make-a-button-and-update-data-on-elasticsearch-using-appsmith"},"Let's try to make a button and update data on ElasticSearch using Appsmith"),(0,i.kt)("p",null,"Now that we know how to read data via ElasticSearch, let's make a function that will ask you to add a new value to the selected id's balance column. We will now execute a query to update the new balance to our accounts.json data."),(0,i.kt)("p",null,"Create a new column next to balance by clicking on the table and selecting the ",(0,i.kt)("inlineCode",{parentName:"p"},"ADD A NEW COLUMN")," button. I am going to name the column as Balance Update. Click the settings icon on the column name to modify it. In column type, select ",(0,i.kt)("inlineCode",{parentName:"p"},"Button")," and you will see all the rows in the Update Balance column will have a button. I am going to name the button as Update. Your configuration should look like this."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-9",src:a(2987).Z,width:"269",height:"537"})),(0,i.kt)("p",null,"On clicking the button, we should get a prompt on the screen with a textbox to write our new balance and update it. To accomplish this, we are going to use another widget call ",(0,i.kt)("inlineCode",{parentName:"p"},"Modal"),". Click the ",(0,i.kt)("inlineCode",{parentName:"p"},"+")," icon next to Widgets and drag the modal widget to the canvas."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-10",src:a(24022).Z,width:"752",height:"351"})),(0,i.kt)("p",null,"Let's configure our modal widget. I am going to name it New Balance and two more widgets into it, ",(0,i.kt)("inlineCode",{parentName:"p"},"Text")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Input"),". Write New Balance in the text and select the size of the text you desire. I am going to take Heading3 for this guide. Now it's time for the input widget. Select data type as currency and the type of currency as USD - US Dollar as our data also has amounts in Dollar. Leave all the settings as it is and come down. Check the Required button to ensure the user has to write data into it if he wants to execute the query. Your configurations should look something like this-"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-11",src:a(38768).Z,width:"272",height:"272"})," ",(0,i.kt)("img",{alt:"Elastic-12",src:a(71505).Z,width:"255",height:"174"})),(0,i.kt)("p",null,"Let's work on the Confirm Button now. Click on it to configure it. You should see a ",(0,i.kt)("inlineCode",{parentName:"p"},"onClick")," section under the Actions tag. What we want here is after the user presses that button, two queries should execute. The first query should update the data with the new balance entered and the second query will re-populate the table with the updated data."),(0,i.kt)("p",null,"After clicking on the ",(0,i.kt)("inlineCode",{parentName:"p"},"onClick")," section, choose ",(0,i.kt)("inlineCode",{parentName:"p"},"Execute an Query")," and then ",(0,i.kt)("inlineCode",{parentName:"p"},"+ Create New Query"),"."),(0,i.kt)("p",null,"Click on the ",(0,i.kt)("inlineCode",{parentName:"p"},"New Query")," button of the datasource you want to make query in. Name your query with a proper name for better understanding and write the query. For updating the data we will use ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," Method."),(0,i.kt)("p",null,"In path write ",(0,i.kt)("inlineCode",{parentName:"p"},"/bank/_update/{{Table1.selectedRow._id}}")," Table1 is the table we have populated before and .selectRow","_","id will take the id of the row from where we pressed the button."),(0,i.kt)("p",null,"In the body use the following command to update the data"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{ "script": "ctx._source.balance = {{new_balance.text}} " }\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"new_balance")," is the input widget where the user writes the new balance. It should look like this -"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-13",src:a(74791).Z,width:"1602",height:"589"})),(0,i.kt)("p",null,"Now go back to the modal widget and click on the settings of Confirm button."),(0,i.kt)("p",null,"Go on ",(0,i.kt)("inlineCode",{parentName:"p"},"onClick => Execute a query => Cleared_Query (the new query we just made)")),(0,i.kt)("p",null,"You can see that there are two more new options, onSuccess and onError. We will use this to re-populate the table with the updated data. In the onSuccess section select ",(0,i.kt)("inlineCode",{parentName:"p"},"Execute a query => Defaulters (the previous query which we used to read data)")),(0,i.kt)("p",null,"Voila! You have now made a function to update the data. We also need to close the modal after updating the balance. Click on the close button settings, and in its onClick method, select ",(0,i.kt)("inlineCode",{parentName:"p"},"close modal")," and in the Modal section select the ",(0,i.kt)("inlineCode",{parentName:"p"},"Balance_Modal")," or the name of the modal you have given."),(0,i.kt)("p",null,"In the end, your modal should look like this -"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-14",src:a(47010).Z,width:"711",height:"594"})),(0,i.kt)("p",null,"Our final step is to configure our Update button to set an onClick method which will open our modal Go to table => select Balance Update column settings => onClick => Open Modal => select the modal name Balance","_","Update"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-1-gif",src:a(77976).Z,width:"1299",height:"756"})),(0,i.kt)("p",null,"Your application is now ready and can be easily deployed by clicking the Deploy button on the top right corner. You can also share your application with others by clicking the share button. You can also invite others to this app via email and even assign roles to them."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-16",src:a(86717).Z,width:"646",height:"480"})),(0,i.kt)("p",null,"Let's update one of the values to check if our application is working."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-2-gif",src:a(38580).Z,width:"1281",height:"881"})),(0,i.kt)("p",null,"All the queries have executed properly. Let's check the value of id 6 to see if it's appropriately updated. I'll use Kibana to check the value."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Elastic-15",src:a(21678).Z,width:"758",height:"578"})),(0,i.kt)("p",null,"We can see the new balance is now 78000. Our update query was successful."),(0,i.kt)("p",null,"Now you know how to update data using ElasticSearch as well."))}h.isMDXComponent=!0},23668:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic-3_(1)-71353b9828e1d18baf817490aa0a0ea7.png"},75696:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic-5-df2358682f9ce7e873fcc8cb6c49c003.png"},88242:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic-6-2dcb4ac78a29e93dce07666804b57448.png"},56518:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_-_1_(1)-5d6c800427555be7899d6d09a6a672ea.png"},77976:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_-_1_gif-91fac240fb836e1f0bd98eba1350ddd0.gif"},94551:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_-_2-71e7dfc540063a9721eefbcdd34d3617.png"},38580:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_-_2_gif_(1)_(1)_(1)_(2)_(1)_(1)_(1)_(1)_(1)_(3)_(3)_(3)_(4)-3a61847112536cf8bef40b331e4451fb.gif"},46205:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_-_4-e78903e24adb6a2d50b947c7b6c0a113.png"},24022:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_10-fbb27befbe98ae0c8c16e49e889c5f16.png"},38768:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_11-5c2bc86f87fbc4e14b6fef36d01add9a.png"},71505:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_12-f5c6938f67798029d4382458bb265f18.png"},74791:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_13-8f3d3b22b5899cb5900ba65225b80d59.png"},47010:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_14-3f5245b3e0324fbbebbbeec0d6fa29f8.png"},21678:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_15-ae67a0d6a313a25bb2de9a72c264015d.png"},86717:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_16-24be0bc73edb20b92fa11608c2edd9b9.png"},12445:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_7-dd80aac90419705868dde86bee62271a.png"},61426:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_8-269849ebe1fb58efcf40520c50bf4870.png"},2987:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Elastic_9_(1)-f1e07e15a84d201cc51539bb7570d1f1.png"}}]);