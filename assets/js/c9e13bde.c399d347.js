"use strict";(self.webpackChunkappsmith_docs=self.webpackChunkappsmith_docs||[]).push([[2177],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(a),h=r,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||i;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},55868:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_position:8},o="GraphQL",s={unversionedId:"reference/datasources/graphql",id:"reference/datasources/graphql",title:"GraphQL",description:"GraphQL is a query language that allows a requesting client to ask for exactly what it's looking for, where it's looking for it, and receive just the response it needs. Making things easier for developers and clients alike. As an alternative to the popular REST services, it offers a single point for retrieving data from multiple sources in the format specified by the consumer.",source:"@site/docs/reference/datasources/graphql.md",sourceDirName:"reference/datasources",slug:"/reference/datasources/graphql",permalink:"/reference/datasources/graphql",draft:!1,editUrl:"https://github.com/bucketclan/appsmith-docs/blob/v1.5/website/docs/reference/datasources/graphql.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Google Sheets",permalink:"/reference/datasources/querying-google-sheets"},next:{title:"MongoDB",permalink:"/reference/datasources/querying-mongodb/"}},l={},p=[{value:"Create GraphQL API",id:"create-graphql-api",level:2},{value:"Connection Settings",id:"connection-settings",level:2},{value:"URL",id:"url",level:4},{value:"Headers",id:"headers",level:4},{value:"Query Parameters",id:"query-parameters",level:4},{value:"Send Appsmith signature header*",id:"send-appsmith-signature-header",level:4},{value:"Authentication Type",id:"authentication-type",level:4},{value:"Use Self-signed certificate",id:"use-self-signed-certificate",level:4},{value:"Create Queries",id:"create-queries",level:2},{value:"GraphQL Datasource Page",id:"graphql-datasource-page",level:4},{value:"Query/JS page",id:"queryjs-page",level:4},{value:"Datasource Page",id:"datasource-page",level:4},{value:"Query",id:"query",level:2},{value:"<strong>List Records</strong>",id:"list-records",level:3},{value:"<strong>\u200bRetrieve A Record\u200b</strong>",id:"retrieve-a-record",level:3},{value:"<strong>Insert Records\u200b/Create Records</strong>",id:"insert-recordscreate-records",level:3},{value:"<strong>Update Records\u200b</strong>",id:"update-records",level:3},{value:"<strong>\u200bDelete A Record\u200b</strong>",id:"delete-a-record",level:3},{value:"Common Settings",id:"common-settings",level:2},{value:"<strong>Pagination</strong>",id:"pagination",level:3},{value:"<strong>Limit/Offset Based Pagination</strong>",id:"limitoffset-based-pagination",level:4},{value:"<strong>Cursor-Based Pagination</strong>",id:"cursor-based-pagination",level:4},{value:"<strong>Query Settings</strong>",id:"query-settings",level:3},{value:"<strong>Using Queries in Applications</strong>",id:"using-queries-in-applications",level:2}],u={toc:p};function d(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"graphql"},"GraphQL"),(0,r.kt)("p",null,"GraphQL is a query language that allows a requesting client to ask for exactly what it's looking for, where it's looking for it, and receive just the response it needs. Making things easier for developers and clients alike. As an alternative to the popular REST services, it offers a single point for retrieving data from multiple sources in the format specified by the consumer."),(0,r.kt)("p",null,"Appsmith provides an easy way to integrate with GraphQL, and enables you to perform different operations using a custom UI built with minimal configurations."),(0,r.kt)("h2",{id:"create-graphql-api"},"Create GraphQL API"),(0,r.kt)("p",null,"To add a GraphQL API, navigate to ",(0,r.kt)("strong",{parentName:"p"},"Explorer")," >> Click on the ",(0,r.kt)("strong",{parentName:"p"},"+")," icon (next to Datasources) >> Select ",(0,r.kt)("strong",{parentName:"p"},"Authenticated GraphQL API")," under APIs."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can choose to create a one-off query by selecting ",(0,r.kt)("a",{parentName:"p",href:"/reference/datasources/graphql#datasource-page"},(0,r.kt)("em",{parentName:"a"},(0,r.kt)("strong",{parentName:"em"},"Create New GraphQL API"))),(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},".")))),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/lIb2SGnQFm4?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Create GraphQL Datasource"))),(0,r.kt)("h2",{id:"connection-settings"},"Connection Settings"),(0,r.kt)("p",null,"Configure the GraphQL API as illustrated below:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Create GraphQL Datasource",src:a(23791).Z,width:"1600",height:"809"}),(0,r.kt)("figure",null,(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Create GraphQL Datasource")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"All required fields are suffixed with an asterisk.")),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"Use this field to add the API URL you want to access. For instance, if you want to visit ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/graphql"},"GitHub GraphQL API"),", enter ",(0,r.kt)("a",{parentName:"p",href:"https://api.github.com/graphql"},"https://api.github.com/graphql "),"in the URL field."),(0,r.kt)("h4",{id:"headers"},"Headers"),(0,r.kt)("p",null,"HTTP Headers are an important part of the API request and response, representing the meta-data associated with the API request and response. Headers carry the following information:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Request and Response Body;"),(0,r.kt)("li",{parentName:"ol"},"Request Authorization;"),(0,r.kt)("li",{parentName:"ol"},"Response Caching;"),(0,r.kt)("li",{parentName:"ol"},"Response Cookies.")),(0,r.kt)("h4",{id:"query-parameters"},"Query Parameters"),(0,r.kt)("p",null,"A parameter is a piece of information you provide to a query during its execution. In the query, parameters can be used independently or as a component of a larger expression to build a criterion. The API you integrate allows you to include one or more",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/data-access-and-binding/querying-a-database"}," query parameters")," as part of the request."),(0,r.kt)("h4",{id:"send-appsmith-signature-header"},"Send Appsmith signature header","*"),(0,r.kt)("p",null,"You can enable ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/connecting-to-data-sources/authentication#send-appsmith-signature-header"},"Send Appsmith Signature Header")," to ensure that the incoming requests originate from Appsmith."),(0,r.kt)("h4",{id:"authentication-type"},"Authentication Type"),(0,r.kt)("p",null,"GraphQL API",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/connecting-to-data-sources/authentication/authentication-type"}," authentication types")," can be defined using the protocols offered by Appsmith."),(0,r.kt)("h4",{id:"use-self-signed-certificate"},"Use Self-signed certificate"),(0,r.kt)("p",null,"Self-signed certificates are sometimes used in testing or internal environments, as they provide incoming/outgoing data encryption and can be created at no cost."),(0,r.kt)("p",null,"The GraphQL Datasource allows you to upload your own self-signed certificate within the API's configuration page. You can follow this ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/connecting-to-data-sources/authentication/self-signed-certificates"},"document "),"to learn more about Self-signed certificates."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This information needs to be provided in .PEM (Privacy Enhanced Mail) format, as shown ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/connecting-to-data-sources/authentication/self-signed-certificates"},"here"),".")),(0,r.kt)("h2",{id:"create-queries"},"Create Queries"),(0,r.kt)("p",null,"You can add queries to the newly created GraphQL datasource in one of the below ways:"),(0,r.kt)("h4",{id:"graphql-datasource-page"},"GraphQL Datasource Page"),(0,r.kt)("p",null,"You can add queries to GraphQL datasource by selecting the ",(0,r.kt)("strong",{parentName:"p"},"New API +")," button available on the datasource page."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"GraphQL Datasource Page",src:a(15408).Z,width:"1600",height:"408"}),(0,r.kt)("figure",null,(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"GraphQL Datasource Page")))),(0,r.kt)("h4",{id:"queryjs-page"},"Query/JS page"),(0,r.kt)("p",null,"By navigating to ",(0,r.kt)("strong",{parentName:"p"},"Explorer")," >> Click plus sign (",(0,r.kt)("strong",{parentName:"p"},"+"),") next to ",(0,r.kt)("strong",{parentName:"p"},"Queries/JS")," >> Select the GraphQL ",(0,r.kt)("strong",{parentName:"p"},"datasource.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Query/JS page",src:a(6499).Z,width:"1600",height:"702"}),(0,r.kt)("figure",null,(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Query/JS page")))),(0,r.kt)("h4",{id:"datasource-page"},"Datasource Page"),(0,r.kt)("p",null,"Similar to REST APIs, you can choose to create a one-off query by clicking on the \u201c",(0,r.kt)("strong",{parentName:"p"},"+"),"\u201d icon next to \u201cDatasources\u201d and selecting \u201c",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"Create New GraphQL API")),"\u201d."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Datasource Page",src:a(78509).Z,width:"1600",height:"529"}),(0,r.kt)("figure",null,(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Datasource Page")))),(0,r.kt)("p",null,"You can create and run queries for an existing GraphQL datasource. You can provide the URL and additional information like the Headers, Params, Body, and Pagination. Once you have added code in the body section, you can directly run the query and connect it with widgets."),(0,r.kt)("p",null,"Let\u2019s take an example to understand how ",(0,r.kt)("strong",{parentName:"p"},"\u201cCreate new GraphQL API\u201d")," works."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/kEjCQ9o4Ozs?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To understand GraphQL query creation, let's use the ",(0,r.kt)("a",{parentName:"p",href:"https://countries.trevorblades.com/"},"Public GraphQL API")," that gives information about continents and countries.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the ",(0,r.kt)("strong",{parentName:"li"},"Datasources")," and choose your \u201cCreate new GraphQL API\u201d."),(0,r.kt)("li",{parentName:"ul"},"Add your API request URL."),(0,r.kt)("li",{parentName:"ul"},"For this example, please use:",(0,r.kt)("a",{parentName:"li",href:"https://countries.trevorblades.com"}," ",(0,r.kt)("em",{parentName:"a"},(0,r.kt)("strong",{parentName:"em"},"https://countries.trevorblades.com"))),(0,r.kt)("em",{parentName:"li"},(0,r.kt)("strong",{parentName:"em"},"."))),(0,r.kt)("li",{parentName:"ul"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Body")," of the request, put the GraphQL query to get details of countries.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"query CountryFilterInput{\n    countries{\n        code\n        name\n        capital\n        continent{\n            code\n            name\n        }\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Now ",(0,r.kt)("strong",{parentName:"li"},"run")," the query.")),(0,r.kt)("p",null,"With this, all of a country's information, including its code, name, capital, etc., will be displayed in the response section."),(0,r.kt)("h2",{id:"query"},"Query"),(0,r.kt)("p",null,"You can create queries to fetch, update and delete data from a datasource using the Appsmith query editor. Let's discuss the following query methods:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Query Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/datasources/graphql#list-records"},"\u200bList Records\u200b")),(0,r.kt)("td",{parentName:"tr",align:null},"Fetches all the data from the database.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/datasources/graphql#retrieve-a-record"},"\u200bRetrieve A Record\u200b")),(0,r.kt)("td",{parentName:"tr",align:null},"Retrieve a particular record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/datasources/graphql#insert-recordscreate-records"},"Insert Records\u200b")),(0,r.kt)("td",{parentName:"tr",align:null},"Insert a new record in the database.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/datasources/graphql#delete-a-record"},"\u200bDelete A Record\u200b")),(0,r.kt)("td",{parentName:"tr",align:null},"Delete a specific record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/datasources/graphql#update-records"},"\u200bUpdate Records\u200b")),(0,r.kt)("td",{parentName:"tr",align:null},"Update a few fields in a record.")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://graphql.org/learn/queries/"},"GraphQL Queries "),"(Read operations like List, Retrieve, etc.) and ",(0,r.kt)("a",{parentName:"p",href:"https://graphql.org/learn/queries/#mutations"},"GraphQL Mutations")," (Write operations like insert, update, etc.) are collectively termed ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/data-access-and-binding/querying-a-database"},"Queries "),"in Appsmith.")),(0,r.kt)("h3",{id:"list-records"},(0,r.kt)("strong",{parentName:"h3"},"List Records")),(0,r.kt)("p",null,"List command lets you display all the data from the database. With Appsmith, you can present data that has been filtered and sorted based on fields, records, etc."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the ",(0,r.kt)("strong",{parentName:"li"},"queries/js")," and choose your GraphQL datasource."),(0,r.kt)("li",{parentName:"ul"},"Rename the query."),(0,r.kt)("li",{parentName:"ul"},"Add your code in the body section.")),(0,r.kt)("p",null,"Once the parameters have been specified, click ",(0,r.kt)("strong",{parentName:"p"},"Run"),". The response section will now display the data."),(0,r.kt)("p",null,"Let's take an example to understand how the list record command works."),(0,r.kt)("p",null,"In this example, we will use ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/graphql"},"Github\u2019s GraphQL API")," to ",(0,r.kt)("strong",{parentName:"p"},"view")," and ",(0,r.kt)("strong",{parentName:"p"},"manage issues"),", including ",(0,r.kt)("strong",{parentName:"p"},"issue assignees, comments, labels,")," and ",(0,r.kt)("strong",{parentName:"p"},"milestones.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Please understand key terms and concepts before using the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/graphql"},"GitHub GraphQL API."))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the following code to the query to get issues from a specified repository:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'query GetRepositoryWithIssues {\n  repository(owner: "harshilp12", name: "Test"){\n    id\n    nameWithOwner\n    description\n    url\n    issues(last: 50) {\n      totalCount\n      nodes{\n        title\n        id\n        number\n        url\n        state\n        createdAt\n        author {\n              login\n        }\n       \n      }\n    }\n  }\n}\n')),(0,r.kt)("p",null,"In the preceding query, we obtained information on issues (totalCount), the most recent issues with their titles and creation dates (createdAt), as well as information on the issue author."),(0,r.kt)("p",null,"You can use a table widget to display your data. You can follow this ",(0,r.kt)("a",{parentName:"p",href:"/widgets/table/"},"document")," to understand how the table widget works."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"CDisplay Data Using Table Widget",src:a(25339).Z,width:"1671",height:"792"}),(0,r.kt)("figure",null,(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Display Data Using Table Widget")))),(0,r.kt)("p",null,"When you make requests to the API, it returns many results. To make the responses more manageable, paginate the results. The benefit of this approach is that it doesn't require additional backend logic. Appsmith supports both ",(0,r.kt)("a",{parentName:"p",href:"/reference/datasources/graphql#pagination"},"Limit/Offset Based Pagination "),"and ",(0,r.kt)("a",{parentName:"p",href:"/reference/datasources/graphql#cursor-based-pagination"},"Cursor-based Pagination.")),(0,r.kt)("h3",{id:"retrieve-a-record"},(0,r.kt)("strong",{parentName:"h3"},"\u200bRetrieve A Record\u200b")),(0,r.kt)("p",null,"Retrieve record lets you fetch data for a particular user detail."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the ",(0,r.kt)("strong",{parentName:"li"},"queries/js")," and choose your GraphQL datasource."),(0,r.kt)("li",{parentName:"ul"},"Rename the query."),(0,r.kt)("li",{parentName:"ul"},"Add your code in the body section.")),(0,r.kt)("p",null,"Let's look at an example where we retrieve the number of GitHub issues(",(0,r.kt)("strong",{parentName:"p"},"total"),", ",(0,r.kt)("strong",{parentName:"p"},"open")," and ",(0,r.kt)("strong",{parentName:"p"},"closed"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'query { \n  repository(owner:"harshilp12", name:"Test") { \n    issues {\n      totalCount\n    }\n    open: issues(states:OPEN) {\n      totalCount\n    }\n    closed: issues(states:CLOSED) {\n      totalCount\n    }\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Now ",(0,r.kt)("strong",{parentName:"li"},"run")," the query.")),(0,r.kt)("p",null,"You receive a response from the preceding query that includes the total number of issues, number of closed issues, and number of open issues. Something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "data": {\n    "repository": {\n      "issues": {\n        "totalCount": 7\n      },\n      "open": {\n        "totalCount": 5\n      },\n      "closed": {\n        "totalCount": 2\n      }\n    }\n  }\n}\n')),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The advantage of using GraphQL over REST API is that you can cherry-pick the response. The API provides the information that you explicitly state in the query.")),(0,r.kt)("p",null,"In GraphQL, you ",(0,r.kt)("strong",{parentName:"p"},"insert"),", ",(0,r.kt)("strong",{parentName:"p"},"update")," or ",(0,r.kt)("strong",{parentName:"p"},"delete")," data with mutations. A ",(0,r.kt)("strong",{parentName:"p"},"Mutation")," is a GraphQL Operation that allows you to insert new data or modify the existing data on the server side. You can think of GraphQL Mutations as the equivalent of POST, PUT, PATCH, and DELETE requests in REST."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Queries"),", and ",(0,r.kt)("strong",{parentName:"p"},"Mutations")," to perform CRUD operations on data are collectively termed ",(0,r.kt)("strong",{parentName:"p"},"Queries")," in Appsmith.")),(0,r.kt)("h3",{id:"insert-recordscreate-records"},(0,r.kt)("strong",{parentName:"h3"},"Insert Records\u200b/Create Records")),(0,r.kt)("p",null,"Insert is a widely used command in the Structured Query Language (SQL). The insert command is used to insert ",(0,r.kt)("strong",{parentName:"p"},"one")," or ",(0,r.kt)("strong",{parentName:"p"},"more rows")," into a ",(0,r.kt)("strong",{parentName:"p"},"database table")," with ",(0,r.kt)("strong",{parentName:"p"},"specified table values"),"."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/zy1wcfgyNjg?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Create New Record"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the ",(0,r.kt)("strong",{parentName:"li"},"queries/js")," and choose your GraphQL datasource."),(0,r.kt)("li",{parentName:"ul"},"Rename the query to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"create_user")),"."),(0,r.kt)("li",{parentName:"ul"},"Next, add your code in the body section and run your query.")),(0,r.kt)("p",null,"To create a GitHub issue, you first require the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"id"))," of the target repository. Once you assign the repository ID, you can input the title and description of the issue."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'mutation CreateIssue {\n  createIssue(input: {repositoryId: "R_kgDOH-t87Q", title: "Sample Title", body: "Sample Body"}) {\n    issue {\n      number\n      body\n      url\n    }\n  }\n}\n')),(0,r.kt)("p",null,"You can create a new issue using the ",(0,r.kt)("a",{parentName:"p",href:"/reference/widgets/button/"},"button "),"and ",(0,r.kt)("a",{parentName:"p",href:"/reference/widgets/modal"},"modal "),"widget."),(0,r.kt)("h3",{id:"update-records"},(0,r.kt)("strong",{parentName:"h3"},"Update Records\u200b")),(0,r.kt)("p",null,"Update queries let you update existing objects of a particular type. With an update query, you can filter nodes and set or remove any field belonging to a type."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/iOnuUo8F-DQ?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the ",(0,r.kt)("strong",{parentName:"li"},"queries/js")," and choose your GraphQL datasource."),(0,r.kt)("li",{parentName:"ul"},"Rename the query to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"update_users")),"."),(0,r.kt)("li",{parentName:"ul"},"Add your code in the body section and run your query.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'mutation updateIssueTest{\n  updateIssue(input:{id:"<issue.id>",title:"<updated_title", body:"<updated_body"}){\n    issue{\n      id\n    }\n  }\n}\n')),(0,r.kt)("p",null,"The above query updates the GitHub issue\u2019s with the ID, Title and description. You can again customize what fields you want back as a result, here we are calling ",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"."),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("a",{parentName:"p",href:"/reference/widgets/modal"},"Modal "),"widget or",(0,r.kt)("a",{parentName:"p",href:"/reference/widgets/json-form"}," JSON form Widget "),"to update the GitHub issues."),(0,r.kt)("h3",{id:"delete-a-record"},(0,r.kt)("strong",{parentName:"h3"},"\u200bDelete A Record\u200b")),(0,r.kt)("p",null,"The Delete Record command deletes a particular record from the database. You can pass the below parameters to Delete Records."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"+")," icon next to the queries/js and choose your GraphQL datasource."),(0,r.kt)("li",{parentName:"ul"},"Rename the query."),(0,r.kt)("li",{parentName:"ul"},"Add your code in the body section and run your query.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'mutation deleteIssueTest{\n  deleteIssue(input:{issueId:"<your_ID>"}){\n    repository{\n      id\n    }\n  }\n}\n')),(0,r.kt)("p",null,"The preceding code deletes the issue using your Issue ID."),(0,r.kt)("p",null,"Similarly, if you want to close an issue, you can use the below-mentioned code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'mutation closeIssueTest{\n  closeIssue(input:{issueId:"<your_id>"}){\n    issue{\n      id\n    }\n  }\n}\n')),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can run queries on real GitHub data using the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/graphql/guides/using-the-explorer"},"GraphQL Explorer"))),(0,r.kt)("h2",{id:"common-settings"},"Common Settings"),(0,r.kt)("p",null,"There are a few settings listed below that are common to many operations that you can perform on GraphQL:"),(0,r.kt)("h3",{id:"pagination"},(0,r.kt)("strong",{parentName:"h3"},"Pagination")),(0,r.kt)("p",null,"Pagination refers to the process of receiving portions of a huge dataset until you receive the entire dataset. This helps optimize your app's performance because trying to get all the data results in a slow load time of your app and a slow rendering of the results in the UI."),(0,r.kt)("h4",{id:"limitoffset-based-pagination"},(0,r.kt)("strong",{parentName:"h4"},"Limit/Offset Based Pagination")),(0,r.kt)("p",null,"Offset-based pagination is a popular technique where the user requests parameters for limit (number of results) and offset (no of records to skip). Let's define a few terms related to Limit-based Pagination."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Limit Variable"),": It lets you select the limit variable from the query."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Limit Value"),": Set the value of the limit variable ( limit the number of rows returned from a query.)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Offset Variable"),": It lets you select the offset variable from the query."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Offset Value"),": Set the value of the offset variable selected (allows you to omit a specified number of rows before the beginning of the result set)")),(0,r.kt)("p",null,"Using both limit and offset skips both rows and limits the rows returned."),(0,r.kt)("p",null,"Let's take an example to understand how Limit/Offset Based Pagination works."),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/wxVP--GMBVQ?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null,"Limit/Offset Based Pagination"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the following code in the body section:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"query GetAllUsers($limitz:Int, $offsetz:Int){\n  users(limit:$limitz, offset:$offsetz){\n    id\n    dob\n    email\n    gender\n    name\n    phone\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the pagination section, select ",(0,r.kt)("strong",{parentName:"li"},"Paginate via Limit and Offset.")),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("em",{parentName:"li"},(0,r.kt)("strong",{parentName:"em"},"limitz"))," as 2, and ",(0,r.kt)("em",{parentName:"li"},(0,r.kt)("strong",{parentName:"em"},"offsetz")," ")," as 0."),(0,r.kt)("li",{parentName:"ul"},"Now ",(0,r.kt)("strong",{parentName:"li"},"run")," the query.")),(0,r.kt)("p",null,"So, if you set ",(0,r.kt)("strong",{parentName:"p"},"Limit Value")," to 2, it returns two rows. For instance, if you set ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"limitz"))," as 4, then the data of 4 users are returned (i.e., number of rows)."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"Offset"))," allows you to omit a specified number of rows before beginning the result set. For instance, if you set ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"offsetz"))," to 2, it skips the first two rows, and the results from the third row are displayed."),(0,r.kt)("h4",{id:"cursor-based-pagination"},(0,r.kt)("strong",{parentName:"h4"},"Cursor-Based Pagination")),(0,r.kt)("p",null,"Cursor-based pagination (also known as keyset pagination) works by returning a pointer to a specific item in the dataset. It's a popular pagination technique that stays clear of many of the difficulties of \"offset-limit\" pagination. Perhaps the biggest advantage of cursor pagination is its ability to handle real-time data effectively. This is because cursors don't require the data to remain static."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Cursor-based pagination works efficiently for large datasets.")),(0,r.kt)("p",null,'It uses "',(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"before")),'" and "',(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"after")),"\" cursors to traverse through the data and returns only a chunk of data which makes the processing faster. Let's define a few terms related to cursor-based Pagination."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Configure Previous Page")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Limit Variable Name"),": Select the variable from the query that holds the last or previous limit value."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Limit Variable Value"),": Override the value for the previous number of rows to be fetched."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Start Cursor Variable"),": Select the variable which holds the ",(0,r.kt)("em",{parentName:"li"},"before cursor"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Start Cursor Value"),": Binding the widget action to the previous page activity.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Configure Next Page")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Limit Variable Name"),": Select the variable from the query that holds the first or next limit value."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Limit Variable Value"),": Update the value for the number of rows fetched next."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Start Cursor Variable"),": Select the variable which holds the ",(0,r.kt)("em",{parentName:"li"},"after")," cursor."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Start Cursor Value"),": Binding the widget action to the next page activity.")),(0,r.kt)("p",null,"Let\u2019s take an example to understand better how Cursor Based Pagination works. In this example, let's display the ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("strong",{parentName:"em"},"GitHub repository\u2019s issues"))," in a list widget using ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/graphql"},"GitHub\u2019s GraphQL API"),"."),(0,r.kt)("p",null,"In this case, we declare the pagination variables that stand for ",(0,r.kt)("strong",{parentName:"p"},"before"),", ",(0,r.kt)("strong",{parentName:"p"},"after"),", ",(0,r.kt)("strong",{parentName:"p"},"first"),", and ",(0,r.kt)("strong",{parentName:"p"},"last"),". Then we can navigate through the data using the previous and next buttons highlighted in the screenshot below."),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(63086).Z,width:"996",height:"872"}),(0,r.kt)("figure",null,(0,r.kt)("figcaption",null))),(0,r.kt)("p",null,"Let's run the following code before defining values for cursor-based pagination:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'query nodesPagination{ \n  repository(owner:"appsmithorg", name:"appsmith"){\n    issues(orderBy:{field:CREATED_AT, direction:DESC},first:6){\n        id\n        number\n        title\n      }\n      pageInfo{\n        endCursor\n        hasNextPage\n        hasPreviousPage\n        startCursor\n      }\n    }\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the ",(0,r.kt)("strong",{parentName:"li"},"before"),", ",(0,r.kt)("strong",{parentName:"li"},"after"),", ",(0,r.kt)("strong",{parentName:"li"},"first"),", and ",(0,r.kt)("strong",{parentName:"li"},"last variables")," in the code as highlighted below:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'query nodesPagination($afterValue:String,$beforeValue:String,$firstValue:Int,$lastValue:Int){ \n  repository(owner:"appsmithorg", name:"appsmith"){\n    issues(orderBy:{field:CREATED_AT, direction:DESC},first:$firstValue, last:$lastValue, after:$afterValue, before:$beforeValue){\n        id\n        number\n        title\n      }\n      pageInfo{\n        endCursor\n        hasNextPage\n        hasPreviousPage\n        startCursor\n      }\n    }\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the pagination section, select ",(0,r.kt)("strong",{parentName:"li"},"\u201cPaginate via Cursor based\u201d"),", and map the values as follows:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'Configure Previous Page\nLimit Variable Name: lastValue \nLimit Variable Value: {{Table1.pageSize}} //your table or list\'s page size\n\nStart Cursor Variable: beforeValue\nStart Cursor Value: {{testapi.data.data.repository.issues.pageInfo.startCursor}}\n\nConfigure Next Page\nLimit Variable Name: firstValue\nLimit Variable Value: this is by default the same value as the "previous page" configuration\'s value. If you want to override this, please select the checkbox "enable separate value for first limit variable"\n\nEnd Cursor Variable: afterValue\nEnd Cursor Value: {{testapi.data.data.repository.issues.pageInfo.endCursor}}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Set list widget\u2019s Items property to:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"{{yourquery.data.data.repository.issues.nodes}}\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You can check this ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/data-access-and-binding/displaying-data-read/display-data-tables"},"document")," to learn more about server-side pagination.")),(0,r.kt)("p",null,"With this, you can run a query on a page change event. The below video demonstrates how you can perform cursor-based pagination:"),(0,r.kt)("figure",null,(0,r.kt)("object",{data:"https://www.youtube.com/embed/R9yUCBb_OFo?autoplay=0",width:"750px",height:"400px"}),(0,r.kt)("figcaption",{align:"center"},(0,r.kt)("i",null))),(0,r.kt)("h3",{id:"query-settings"},(0,r.kt)("strong",{parentName:"h3"},"Query Settings")),(0,r.kt)("p",null,"The Query Settings Pane provides access to properties for the query. You can specify the following ",(0,r.kt)("a",{parentName:"p",href:"/core-concepts/data-access-and-binding/querying-a-database/query-settings"},"settings "),"in the ",(0,r.kt)("strong",{parentName:"p"},"Settings")," tab on the Appsmith Query Editor:"),(0,r.kt)("p",null,"With Appsmith GraphQL integration, it's possible to create apps that seamlessly connect with the database and provide additional flexibility for updating and analyzing data."),(0,r.kt)("h2",{id:"using-queries-in-applications"},(0,r.kt)("strong",{parentName:"h2"},"Using Queries in Applications")),(0,r.kt)("p",null,"Once you have successfully run a Query, you can use it in your application to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/core-concepts/data-access-and-binding/displaying-data-read/"},"Display Data ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/core-concepts/data-access-and-binding/capturing-data-write/capture-form-data"},"Capture Data ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/core-concepts/data-access-and-binding/querying-a-database/"},"Execute Queries"))))}d.isMDXComponent=!0},15408:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Screenshot_2022-08-30_at_12.56.01_PM_(1)-1922192060fd2ac92930c4283c3c3ce9.png"},6499:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Screenshot_2022-08-30_at_12.59.35_PM-d97ad2573a49b44d2d317bef8db7fd99.png"},63086:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Screenshot_2022-09-05_at_3.29.42_PM-4f099134782e63ec7664c84c97bdca6c.png"},23791:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Screenshot_2022-09-07_at_11.43.59_AM-99f12a85d75db8ed6026cd0dd97c459a.png"},78509:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Screenshot_2022-09-15_at_9.20.51_AM-72e5004629876ac8aeaeefafff53b680.png"},25339:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/graphlql1-1f3f50e0bbfba0cbe9dc67b03975d15f.PNG"}}]);