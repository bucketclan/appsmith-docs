"use strict";(self.webpackChunkappsmith_docs=self.webpackChunkappsmith_docs||[]).push([[4059],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=i,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},15744:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const o={description:"JavaScript guide for building apps on Appsmith,",sidebar_position:2},r="Writing JavaScript in Appsmith",s={unversionedId:"learning-and-resources/how-to-guides/writing-javascript-in-appsmith",id:"learning-and-resources/how-to-guides/writing-javascript-in-appsmith",title:"Writing JavaScript in Appsmith",description:"JavaScript guide for building apps on Appsmith,",source:"@site/docs/learning-and-resources/how-to-guides/writing-javascript-in-appsmith.md",sourceDirName:"learning-and-resources/how-to-guides",slug:"/learning-and-resources/how-to-guides/writing-javascript-in-appsmith",permalink:"/appsmith-docs/learning-and-resources/how-to-guides/writing-javascript-in-appsmith",draft:!1,editUrl:"https://github.com/bucketclan/appsmith-docs/blob/v1.5/website/docs/learning-and-resources/how-to-guides/writing-javascript-in-appsmith.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{description:"JavaScript guide for building apps on Appsmith,",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"How to Use JS Object Within Appsmith?",permalink:"/appsmith-docs/learning-and-resources/how-to-guides/how-to-use-js-object-within-appsmith"},next:{title:"How to use filters on Appsmith table widget",permalink:"/appsmith-docs/learning-and-resources/how-to-guides/how-to-use-filters-on-appsmith-table-widget"}},l={},p=[{value:"<strong>Moustache Syntax</strong>",id:"moustache-syntax",level:2},{value:"<strong>Binding Data</strong>",id:"binding-data",level:2},{value:"<strong>Accessing Widget Property / State</strong>",id:"accessing-widget-property--state",level:2},{value:"<strong>Performing Actions</strong>",id:"performing-actions",level:2},{value:"<strong>Manually triggering APIs/Query</strong>",id:"manually-triggering-apisquery",level:2},{value:"Multiline JavaScript",id:"multiline-javascript",level:2},{value:"Making Table Columns Dynamic in Appsmith",id:"making-table-columns-dynamic-in-appsmith",level:2}],c={toc:p};function u(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"writing-javascript-in-appsmith"},"Writing JavaScript in Appsmith"),(0,i.kt)("p",null,"Appsmith is a low-code tool that lets us build tools and user interfaces. We\u2019ll be using JavaScript to interact with the UI Widgets, APIs, and Database Queries during this process of building applications. In this guide, we\u2019ll be looking at some of the basic operations with JavaScript to help us understand how easy and fun building apps on Appsmith is!"),(0,i.kt)("h2",{id:"moustache-syntax"},(0,i.kt)("strong",{parentName:"h2"},"Moustache Syntax")),(0,i.kt)("p",null,"The Moustache syntax helps us write JavaScript anywhere in Appsmith. For example, say if you want to render the data onto a table from API, on Appsmith, you can drag and drop the table widget, open the property pane and inside the table data, use moustache syntax to call the API."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ myApiEndpoint.data.field1 }}\n")),(0,i.kt)("h2",{id:"binding-data"},(0,i.kt)("strong",{parentName:"h2"},"Binding Data")),(0,i.kt)("p",null,"Binding data into UI is one of the most common and frequently used operations when building User Interfaces. Now, you\u2019ll look at how you can bind data into charts/table widgets inside Appsmith. For this, we\u2019ll be using a sample query to fetch data from the mock database and then bind it to the widget."),(0,i.kt)("p",null,"Now create an application under your personal workspace and create a new DB Query by clicking the ",(0,i.kt)("inlineCode",{parentName:"p"},"+")," icon next to it. Rename the query to ",(0,i.kt)("inlineCode",{parentName:"p"},"get_products"),"."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You can rename any page name/widget name/query name by simply double-clicking on the existing one.")),(0,i.kt)("p",null,"Select the Mock database and write a new query under it, in here, we\u2019ll be using a database of the online store. Now fetch all the products of the store by using the following SQL Query:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"select * from products\n")),(0,i.kt)("p",null,"Execute the query by clicking on the Run button, you should see all the products in the Query response section."),(0,i.kt)("p",null,"Next, add the response; let\u2019s bind this query to the table widget; you can now go to a page and drag and drop a table widget. You can access the table\u2019s property pane by clicking on the cog icon on the top-right of the widget. Now let\u2019s write JS in the Table Data section to access the query. For this, you should be using the Moustache syntax:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ get_products.data }}\n")),(0,i.kt)("p",null,"There you go! You should see all your products inside the table. If you want to display only specific products, you can implement a map function and return the necessary items. For example, the below JS code only shows the product name and the price in the table."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ get_products.data.map(item =>({name:item.productName, price:item.mrp})) }}\n")),(0,i.kt)("h2",{id:"accessing-widget-property--state"},(0,i.kt)("strong",{parentName:"h2"},"Accessing Widget Property / State")),(0,i.kt)("p",null,"While building UI you might often need to access the state of the different properties for different things. For example, say you want to display the details of a particular row in a table, you\u2019ll need to write some code. Now, look at how you can utilise JS in Appsmith and access the state and properties of the widget."),(0,i.kt)("p",null,"For this, let\u2019s use the same table and display all the details of the product when clicked on a row by accessing the state."),(0,i.kt)("p",null,"First, drag and drop the required text widgets. Now inside the text widget property pane, under the Text property add the following JS snippet:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ Table1.selectedRow.productName }}\n")),(0,i.kt)("p",null,"Now, when you click on the random row\u2019s in the table, you can see the text automatically changes its state to the product name. In this way, you can access and manipulate the state inside the widgets. Similarly, you can also, add images and many more for your applications."),(0,i.kt)("h2",{id:"performing-actions"},(0,i.kt)("strong",{parentName:"h2"},"Performing Actions")),(0,i.kt)("p",null,"Appsmith loves JavaScript! Whenever you want to write custom logic for certain action calls or API calls, you can customise with simple JS. For example, say, you want to show an alert whenever you\u2019re searching through tables. You can select the row and can add logic to the ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"onSeachTextChanged"))," property."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ showAlert(Table1.searchText) }}\n")),(0,i.kt)("p",null,"With this, whenever you\u2019re searching for anything on the tables, you\u2019ll see an alert with the value you\u2019ve entered in the search input."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://lh5.googleusercontent.com/PB37xpaK7u6063ANpW8tnyTQyM16w9XugIt_PSQy2O_Hoy-A-FyP4Dhaq1HR8NUfyCvoVF0CKpx2Q3FMNO3JMifebaORF0MSfXIm3HSsVmyXQ2OWEaa5bGgKVDhpWNB27MNwF4j8",alt:"Configuring Actions on Appsmith"})),(0,i.kt)("h2",{id:"manually-triggering-apisquery"},(0,i.kt)("strong",{parentName:"h2"},"Manually triggering APIs/Query")),(0,i.kt)("p",null,"You might often want to invoke your API Queries on certain actions. For example, say you\u2019re APIs or DB Queries are updating from time to time and wanted to add a refresh button, you can simply do it with JS in Appsmith."),(0,i.kt)("p",null,"Now, let\u2019s quickly add a button that will execute the Query when clicked. Next, open the button\u2019s property pane; you\u2019ll find the onclick property under the actions section. Now add a new action and choose to execute a DB Query option; you\u2019ll find all the already defined queries in the application. Select the ",(0,i.kt)("inlineCode",{parentName:"p"},"get_produts")," query you\u2019ll see JS already added to the onclick action."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{get_products.run()}}\n")),(0,i.kt)("p",null,"In this way, you can customise all the actions on Appsmith for different widgets."),(0,i.kt)("h2",{id:"multiline-javascript"},"Multiline JavaScript"),(0,i.kt)("p",null,"So far, we\u2019ve seen simple JS operations, but say if you\u2019re working on some API integrations or some different data sources, you might need to write some huge JS code. With Appsmith, you can do that within the same moustache syntax. Here\u2019s a simple example of using multi-line code in Appsmith."),(0,i.kt)("p",null,"In our ",(0,i.kt)("inlineCode",{parentName:"p"},"Table1"),", where we are binding all our products data, we\u2019ve simply used ",(0,i.kt)("inlineCode",{parentName:"p"},"get_products.data()")," method. Instead of that, you can also write a function, try the below code snippet:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"{{ \nfunction(){\n    const data = get_products.data.map(item => ({\n        name: item.productName,\n        price : item.mrp\n        }));\n     return data;\n    }\n}}\n")),(0,i.kt)("p",null,"In this way, you can also write multi-line code within Appsmith! For more information on writing code in Appsmith, please refer to this page ",(0,i.kt)("a",{parentName:"p",href:"/core-concepts/writing-code/"},"Writing Code"),"."),(0,i.kt)("h2",{id:"making-table-columns-dynamic-in-appsmith"},"Making Table Columns Dynamic in Appsmith"),(0,i.kt)("p",null,"In Appsmith, suppose you want to implement dynamic columns (show only necessary columns based on selection) in a table, you could write simple JavaScript inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"Table Data")," property. With this, you could show only columns that are selected from a dropdown."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(3427).Z,width:"2200",height:"1236"})),(0,i.kt)("p",null,"For example, say your table has the following in the Table Data:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'[\n  {\n    "step": "#1",\n    "task": "Drag a Table",\n    "status": ":white_check_mark:",\n    "action": ""\n  },\n  {\n    "step": "#2",\n    "task": "Create a Query fetch_users with the Mock DB",\n    "status": "--",\n    "action": ""\n  },\n  {\n    "step": "#3",\n    "task": "Bind the query to the table",\n    "status": "--",\n    "action": ""\n  }\n]\n')),(0,i.kt)("p",null,"Now you wanted to show columns based on the selection in a dropdown, let's add a dropdown with values that are the same as columns in the table."),(0,i.kt)("p",null,"Drag and drop a Dropdown widget onto the canvas and add the following to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Options")," List and make it a Multi-Select dropdown in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Selection Type")," property."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'[\n  {\n    "label": "task",\n    "value": "task"\n  },\n  {\n    "label": "status",\n    "value": "status"\n  },\n  {\n    "label": "action",\n    "value": "action"\n  }\n]\n')),(0,i.kt)("p",null,"Lastly, update the code in the table widget, map the data in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Table Data")," property using a moustache syntax and only return the data that's selected from the dropdown widget:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'{{\n[\n  {\n    "step": "#1",\n    "task": "Drag a Table",\n    "status": ":white_check_mark:",\n    "action": ""\n  },\n  {\n    "step": "#2",\n    "task": "Create a Query fetch_users with the Mock DB",\n    "status": "--",\n    "action": ""\n  },\n  {\n    "step": "#3",\n    "task": "Bind the query to the table",\n    "status": "--",\n    "action": ""\n  }\n].map((row) => {\nconst obj = {};\nDropdown1.selectedOptionValues.map((val) => { obj[val] = row[val]  });\nreturn obj;\n })\n}}\n')),(0,i.kt)("p",null,"You could check the live example in this app ",(0,i.kt)("a",{parentName:"p",href:"https://app.appsmith.com/applications/6063307b034ece74b148125a/pages/6063307b034ece74b148125c"},"here"),"."))}u.isMDXComponent=!0},3427:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dynamic-table_(1)-731c877870e01fc4fda5e428b3d6bc8b.gif"}}]);